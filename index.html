<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Altiragame</title>
    <!-- �������� ����-��� ��� ��������� ��������� -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <style>
        /* ���������� ����� ��� �������� �������� canvas */
        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            background: #231F20; /* ��� �� ���� ����� */
        }
        #unity-container {
            position: absolute;
            width: 100%; height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #unity-canvas {
            width: auto; height: 100%;
            background: #231F20;
        }
        /* ��������� ��� ������� ������� (�������) */
        @media (min-aspect-ratio: 9/16) {
            #unity-canvas { width: 100%; height: auto; max-height: 100vh; }
        }
        /* ��� ����������� ���������� �� ��������� */
        @media (orientation: landscape) and (max-height: 768px) {
            #unity-footer { display: none; }
        }
    </style>
</head>
<body>
    <div id="unity-container" class="unity-desktop">
        <!-- Canvas � ��������� ��� ����������� �������� �� Player Settings -->
        <canvas id="unity-canvas" width=1080 height=1920 tabindex="-1"></canvas>
        <div id="unity-loading-bar">...</div>
        <div id="unity-warning"></div>
        <div id="unity-footer">...</div>
    </div>

    <script>
        var buildUrl = "Build";
        var config = {
            companyName: 'PheoniX Tech',
            productName: 'Altiragame',
            productVersion: '0.0.0.0',
            // Unity ��������� ���������� ����� ������ ������
            dataUrl: buildUrl + '/WebGL_Build.data',
            frameworkUrl: buildUrl + '/WebGL_Build.framework.js',
            codeUrl: buildUrl + '/WebGL_Build.wasm',
            streamingAssetsUrl: "StreamingAssets",
            // ��������� ����-��������, ��������� ��������� ����
            matchWebGLToCanvasSize: false,
        };

        // ������� ���������� �������� Canvas ��� ����������� 9:16
        function updateCanvasSize() {
            var canvas = document.querySelector("#unity-canvas");
            var container = document.querySelector("#unity-container");
            var containerWidth = container.clientWidth;
            var containerHeight = container.clientHeight;
            var targetRatio = 9 / 16; // ����������� ������ iPhone � ��������
            var currentRatio = containerWidth / containerHeight;

            if (currentRatio > targetRatio) {
                // ��������� ���� ����: ������������ �� ������
                canvas.style.width = (containerHeight * targetRatio) + 'px';
                canvas.style.height = containerHeight + 'px';
            } else {
                // ��������� ��� ����: ������������ �� ������
                canvas.style.width = containerWidth + 'px';
                canvas.style.height = (containerWidth / targetRatio) + 'px';
            }
            // ��������� ���������� �������� canvas ��� ������
            canvas.width = canvas.clientWidth * window.devicePixelRatio;
            canvas.height = canvas.clientHeight * window.devicePixelRatio;
        }

        // ������������� ��� �������� ��������
        document.addEventListener('DOMContentLoaded', function() {
            var canvas = document.querySelector("#unity-canvas");
            // �������� �� ��������� ����������
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                var meta = document.createElement('meta');
                meta.name = 'viewport';
                meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
                document.getElementsByTagName('head')[0].appendChild(meta);
                document.querySelector("#unity-container").className = "unity-mobile";
                canvas.className = "unity-mobile";
            }
            // ��������� ��������� �� ��������� ������� ����
            window.addEventListener('resize', updateCanvasSize);
            updateCanvasSize(); // �������������� ��������� �������
            // ����� ������� ����������� ��� �������� Unity � �������������� createUnityInstance
        });
    </script>
    <!-- ��������� Unity. ��� ����� ����������� ������������� -->
    <script src="Build/WebGL_Build.loader.js"></script>
</body>
</html>
